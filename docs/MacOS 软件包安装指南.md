# 数字小祥 for macOS 安装指南

> 欢迎使用数字小祥！
>
> 本指南将引导您在 macOS 上完成程序的安装和启动。请不用担心，整个过程非常简单，即使您对电脑不太熟悉，只要跟着步骤一步步来，也一定能成功！

> [!NOTE]
> **关于 macOS 版本的特别说明**
>
> 目前，数字小祥的 macOS 版本正在活跃的开发与测试中。我们正在努力确保它能稳定运行，但您仍有可能会遇到一些小问题。
>
> 如果您在安装或使用中遇到任何困难，请不要担心。您可以参考文档末尾的 **[如何反馈问题](#如何反馈问题)** 部分，向我们报告您遇到的情况，我们会尽快为您提供帮助。

## 一、安装前的准备

在开始安装之前，请花一分钟时间确认您的设备是否满足以下条件，这是保证程序能够顺利运行的基础：

1.  **芯片类型**：您的 Mac 使用的是 **M 系列芯片**（例如 M1, M2, M3, M4）。
    *   **查看方法**：点击屏幕左上角的 `` 苹果图标 -> 选择“关于本机” -> 在“芯片”一栏查看。
2.  **系统版本**：您的 macOS 版本为 **14 (Sonoma)** 或更高版本（如 15，26）。
    *   **查看方法**：同样在“关于本机”窗口中，查看“macOS”一栏。

> [!IMPORTANT]
> 为了保证您的使用体验，我们强烈建议在符合以上条件的设备上运行本软件。我们无法为使用 Intel 芯片或旧版 macOS 系统的设备提供支持。
> 如果您是经验丰富的用户并希望尝试在这些设备上安装，我们非常钦佩您的探索精神，但可能无法为您提供相应的技术支持。

## 二、开始安装

准备工作就绪！现在，让我们开始安装吧。

1.  **确保网络通畅**
    整个安装过程需要从网络上下载一些必要的组件，大小约在 1GB 到 4GB 之间，请确保您的 Mac 已连接到互联网。

2.  **运行安装程序**
    双击软件文件夹中的 `安装程序.command` 文件。

    *   **遇到“无法打开”的提示怎么办？**
        如果您在双击后看到类似下面的提示，例如“无法打开‘安装程序.command’，因为它来自身份不明的开发者”，请不要担心，这是 macOS 的一项标准安全措施。
        <img src="./MacOS 软件包安装指南.assets/image-20260111210023975.png" alt="image-20260111210023975" style="zoom:50%;" />

    *   **解决方法如下**：
        1.  打开“系统设置”，进入“隐私与安全性”页面。
        2.  向下滚动页面，直到您看到“‘安装程序.command’已阻止使用，因为其来自不明开发者”的提示。

            <img src="./MacOS 软件包安装指南.assets/image-20260111210203644.png" alt="image-20260111210203644" />
        3.  点击右侧的“仍要打开”按钮，在弹出的窗口中输入您的电脑密码，然后点击“打开”。
            <img src="./MacOS 软件包安装指南.assets/image-20260111210257295.png" alt="image-20260111210257295" style="zoom: 33%;" />
        4.  现在，安装程序就会顺利启动了。完成这次授权后，未来再次运行它就不会再弹出这个提示了。

3.  **选择下载服务器**
    接下来，安装程序会弹出一个黑色的窗口（我们称之为“终端”），并询问您是否位于中国大陆。这会帮助程序选择最快的下载服务器。
    <img src="./MacOS 软件包安装指南.assets/截屏2026-01-11 21.05.19.png" alt="截屏2026-01-11 21.05.19" style="zoom: 50%;" />

    *   如果您在中国大陆，请输入 `y`，然后按下回车键。
    *   如果您在其他地区，请输入 `n`，然后按下回车键。

4.  **耐心等待安装**
    程序会自动开始下载和安装所有需要的组件。这个过程可能会持续几分钟到半小时不等，具体时间取决于您的网络速度。请您耐心等待，尽量不要操作电脑。
    当您看到下图所示的“安装完成！”字样时，就代表大功告成啦！
    <img src="./MacOS 软件包安装指南.assets/截屏2026-01-11 21.08.50.png" alt="截屏2026-01-11 21.08.50" />

    > [!TIP]
    > 如果安装程序运行结束后没有显示“安装完成”，请尝试**再运行一次 `安装程序.command`**。如果问题依旧，请参考文末的 **[如何反馈问题](#如何反馈问题)** 部分联系我们。

5.  **启动主程序**
    安装完成后，双击文件夹中的 `运行主程序.command` 即可启动数字小祥！
    *   **温馨提示**：第一次运行主程序时，可能也会遇到“身份不明的开发者”提示，按照上面第 2 步的方法再操作一次就可以解决了。

## 三、常见问题解答 (Q&A)

这里我们整理了一些您可能会遇到的问题和解答。

1.  **问：我忘记怎么启动程序了，怎么办？**
    **答**：很简单，双击文件夹里的 `运行主程序.command` 文件。

2.  **问：双击程序时提示“来自身份不明的开发者”，怎么办？**
    **答**：这是一个常见的安全提示。请参考上方 **[二、开始安装](#二、开始安装)** 步骤 2 中的图文教程进行操作。

3.  **问：安装过程中弹窗说“需要使用命令行开发者工具”，让我安装，这是什么？**
    **答**：这是苹果提供的一个官方开发工具包。我们的程序在安装时需要用到其中的一些工具。
    <img src="./MacOS 软件包安装指南.assets/image-20260111211651803.png" alt="image-20260111211651803" />
    *   **您需要做的是**：点击“安装”，然后等待它完成。这个工具包比较大（约 2-3 GB），下载可能需要一些时间。
    *   **一个小请求**：我们正在努力让安装过程不再需要这个工具。如果您遇到了这个提示，希望您可以在安装完成后，将终端窗口里的所有文本复制下来，通过 **[如何反馈问题](#如何反馈问题)** 中的方式发给我们。这能极大地帮助我们改进程序，非常感谢！

4.  **问：程序运行中突然自己关闭了（闪退），我该怎么办？**
    **答**：请不要着急。为了帮助我们定位问题，请您：
    1.  复制终端窗口（黑色窗口）里的所有文本内容。
    2.  找到 `GPT_SoVITS` 文件夹下的 `faulthandler_log.txt` 文件。
    3.  将您复制的文本和这个 `faulthandler_log.txt` 文件一起发送给我们。具体发送方式请见 **[如何反馈问题](#如何反馈问题)**。

5.  **问：我想在桌面上创建一个快捷方式，方便启动，怎么做？**
    **答**：当然可以！
    1.  右键点击 `运行主程序.command` 文件，选择“制作替身”。
    2.  将新生成的那个“替身”文件拖到您的桌面上。

6.  **问：我想把程序图标固定在屏幕下方的程序坞（Dock栏）里，可以吗？**
    **答**：非常抱歉，由于目前程序的技术架构限制，暂时无法直接固定到程序坞。不过，您可以参考上一条，在桌面上创建替身，同样非常方便。

7.  **问：如果我不想用了，该如何卸载程序？**
    **答**：卸载非常简单，您只需要将包含本程序的所有文件和文件夹（也就是您下载的整个文件夹）直接拖到废纸篓里删除即可。

8.  **问：为什么 Mac 版本的界面和 Windows 版本看起来有些不一样？**
    **答**：这是正常现象。为了在不同操作系统上都能提供最好的体验，macOS 和 Windows 版本的程序是独立开发的。它们的核心功能会保持同步，但在界面和一些具体实现上会根据系统特性进行调整。

## 四、如何反馈问题

在您联系我们之前，请先确认您的问题是否已在 **[常见问题解答](#三、常见问题解答-qa)** 中列出。

如果您遇到了新的问题，或者按照解答操作后问题依旧存在，欢迎随时向我们反馈！为了让我们能快速、准确地帮您解决问题，**请您在反馈时务必提供以下信息**：

*   **安装时出错**：请**复制并发送**安装程序终端窗口（黑色窗口）里的**所有文本**。
*   **运行时出错/闪退**：
    1.  请**复制并发送**运行程序时终端窗口里的**所有文本**。
    2.  请检查 `GPT_SoVITS` 文件夹下的 `faulthandler_log.txt` 文件。如果里面有内容，也请一并发送给我们（可以直接发送文件，也可以复制其中的文本）。

> [!WARNING]
> **反馈问题时的小贴士**：
> *   **请务必附带我们需要的错误信息**。没有这些信息，我们就像是“盲人摸象”，很难帮您找到问题根源。
> *   **请直接复制和粘贴文本**，而不是发送截图。文本信息可以让我们直接搜索和分析关键错误，效率更高。
> *   **请不要反馈**“常见问题解答”中已有明确解决方案的问题，或是与 **[安装前的准备](#一、安装前的准备)** 中提到的系统要求不符的设备上出现的问题。

**反馈渠道（三选一即可）**：

1.  **GitHub Issue**：访问 [项目 Issue 页面](https://github.com/MacchaPafe/D_sakiko/issues)，点击 "New issue" 按钮，详细描述您的问题，并将上述要求的信息粘贴进去。
2.  **QQ**：如果您在项目的 QQ 群中，可以直接在群里提问，或联系群主/管理员。
3.  **Bilibili**：在 Bilibili 的介绍视频中找到UP主“迷途见灯火”，通过私信向他反馈。由于 Bilibili 的私信机制，建议您提前组织好语言，将所有信息整理在一条消息程序不会在您的系统里里一次性发送。

> **特别注意**：请不要向UP主“星冰奈”反馈 macOS 版本的问题，他未参与此版本的开发，感谢您的理解与配合。

## 五、一些技术细节

> 这部分内容是为对软件开发感兴趣的朋友准备的，如果您不感兴趣或看不太懂，可以安全地跳过。

macOS 对应用程序有着严格的安全和签名要求，这给分发带来了挑战。为了在保证功能更新灵活性的同时，又能顺利运行，我们选择了直接从源代码运行的方案。

这意味着程序本身不包含庞大的依赖库，而是在您首次运行时通过安装脚本（`安装程序.command`）从网络上下载并配置好一个独立的、干净的 Python 环境。

**安装流程简介**：
1.  **安装 Homebrew**：一个强大的 macOS 包管理器，类似一个应用商店，但用于命令行工具。
2.  **安装 Python 和 uv**：通过 Homebrew 安装特定版本的 Python (3.11) 和一个超高速的 Python 包管理器 `uv`。
3.  **安装依赖**：使用 `uv` 下载并安装项目所需的所有 Python 库。

为了避免用户在安装某些库（如 `pyopenjtalk`, `opencc`）时，因缺少 C++ 编译器而失败，我们在 `wheels` 文件夹中提供了预先编译好的版本。安装脚本会智能检测您的环境：如果检测到您有编译工具，会优先在本地编译；如果没有，则会自动使用我们提供的预编译包，从而大大简化了安装过程，避免了安装 Xcode 命令行工具的麻烦。

如果您发现还有其他库需要现场编译，非常欢迎告诉我们，我们会考虑为它们也提供预编译包，让安装体验变得更加顺滑！
